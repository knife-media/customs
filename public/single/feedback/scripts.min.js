"use strict";!function(){if("undefined"!=typeof knife_custom_feedback){var a=document.querySelector(".entry-content");if(null!==a&&void 0!==knife_custom_feedback.ajaxurl){var e,n,r,i=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var r in t.attributes)n.setAttribute(r,t.attributes[r]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n},t=function(e){var n,t=a.querySelector(".figure--formats"),r=i("ul",{parent:t});for(n in e)!function(){var t=i("li",{parent:r,text:e[n]});t.addEventListener("click",function(e){if(e.preventDefault(),t.hasAttribute("data-selected"))return t.removeAttribute("data-selected",!0);t.setAttribute("data-selected",!0)})}();return r}(knife_custom_feedback.figure.formats),o=knife_custom_feedback.figure.brief,u=t;function c(e){window.setTimeout(function(){e.style.height="auto",e.style.height=e.scrollHeight+1+"px"},0)}var s,t=a.querySelector(".figure--brief"),f=i("form",{parent:t}),d=i("button",{text:knife_custom_feedback.button,attributes:{type:"submit"}});for(s in o)!function(){var t=i("textarea",{parent:f,attributes:{name:s,required:"required",rows:1,placeholder:o[s]}});t.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&d.click(),c(t)}),t.addEventListener("paste",function(){c(t)})}();i("h6",{parent:f,html:knife_custom_feedback.privacy}),f.appendChild(d),f.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_custom_feedback.nonce,time:knife_custom_feedback.time,fields:[],formats:[]},n=u.querySelectorAll("li"),r=(n.forEach(function(e){e.hasAttribute("data-selected")&&t.formats.push(e.textContent)}),f.querySelectorAll("textarea")),a=(r.forEach(function(e){t.fields.push({label:e.getAttribute("placeholder"),value:e.value})}),d.setAttribute("disabled","disabled"),d.setAttribute("data-loading",!0),new XMLHttpRequest);a.open("POST",knife_custom_feedback.ajaxurl+"/brief"),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(d.removeAttribute("data-loading"),200!==a.status)return d.textContent=knife_custom_feedback.error;d.textContent=knife_custom_feedback.success,r.forEach(function(e){e.value=""}),n.forEach(function(e){e.removeAttribute("data-selected")})},a.onerror=function(){d.removeAttribute("data-loading"),d.textContent=knife_custom_feedback.error},a.send(JSON.stringify(t))}),t=knife_custom_feedback.figure.callback,e=a.querySelector(".figure--callback"),e=i("form",{parent:e}),n=i("input",{parent:e,attributes:{type:"email",placeholder:t.email,required:"required"}}),r=i("button",{parent:e,attributes:{type:"submit"},text:t.button}),e.addEventListener("submit",function(e){e.preventDefault();var e={nonce:knife_custom_feedback.nonce,time:knife_custom_feedback.time,email:n.value},t=(r.setAttribute("disabled","disabled"),r.setAttribute("data-loading",!0),new XMLHttpRequest);t.open("POST",knife_custom_feedback.ajaxurl+"/callback"),t.setRequestHeader("Content-Type","application/json"),t.onload=function(){if(r.removeAttribute("data-loading"),200!==t.status)return r.textContent=knife_custom_feedback.error;r.textContent=knife_custom_feedback.success,n.value=""},t.onerror=function(){r.removeAttribute("data-loading"),r.textContent=knife_custom_feedback.error},t.send(JSON.stringify(e))})}}}();