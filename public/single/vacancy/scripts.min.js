"use strict";!function(){if("undefined"!=typeof knife_theme_custom){var e=document.querySelector(".entry-content");if(null!==e&&void 0!==knife_theme_custom.ajaxurl){var n=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var i in t.attributes)n.setAttribute(i,t.attributes[i]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n};if(knife_theme_custom.fields){var i=knife_theme_custom.fields;function r(e){window.setTimeout(function(){e.style.height="auto",e.style.height=e.scrollHeight+1+"px"},0)}var t,a=n("figure",{classes:["figure","figure--request"],parent:e}),o=e.querySelector(".figure--navigation"),s=(null!==o&&e.insertBefore(a,o),n("form",{parent:a})),u=n("button",{text:knife_theme_custom.button,attributes:{type:"submit"}});for(t in i)!function(e){var t=n("textarea",{parent:s,attributes:{name:e,required:"required",rows:1,placeholder:i[e]}});r(t),t.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&u.click(),r(t)}),t.addEventListener("paste",function(){r(t)}),window.addEventListener("resize",function(){r(t)})}(t);s.appendChild(u),s.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_theme_custom.nonce,time:knife_theme_custom.time,heading:knife_theme_custom.heading,fields:[]},n=(knife_theme_custom.mention&&(t.mention=knife_theme_custom.mention),s.querySelectorAll("textarea")),i=(n.forEach(function(e){t.fields.push({label:e.getAttribute("placeholder"),value:e.value}),"name"===e.name&&(t.name=e.value)}),u.setAttribute("disabled","disabled"),u.setAttribute("data-loading",!0),new XMLHttpRequest);i.open("POST",knife_theme_custom.ajaxurl),i.setRequestHeader("Content-Type","application/json"),i.onload=function(){if(u.removeAttribute("data-loading"),200!==i.status)return u.textContent=knife_theme_custom.error;u.textContent=knife_theme_custom.success,n.forEach(function(e){e.value=""})},i.onerror=function(){u.removeAttribute("data-loading"),u.textContent=knife_theme_custom.error},i.send(JSON.stringify(t))})}}}}();