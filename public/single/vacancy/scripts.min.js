"use strict";!function(){if("undefined"!=typeof knife_custom_vacancy){var e=document.querySelector(".entry-content");if(null!==e&&void 0!==knife_custom_vacancy.ajaxurl){var n=function(e,t){var n=document.createElement(e);if(t.hasOwnProperty("class")&&n.classList.add(t.class),t.hasOwnProperty("classes")&&t.classes.forEach(function(e){n.classList.add(e)}),t.hasOwnProperty("text")&&(n.textContent=t.text),t.hasOwnProperty("html")&&(n.innerHTML=t.html),t.hasOwnProperty("attributes"))for(var a in t.attributes)n.setAttribute(a,t.attributes[a]);return t.hasOwnProperty("parent")&&t.parent.appendChild(n),n};if(knife_custom_vacancy.fields){var a=knife_custom_vacancy.fields;function i(e){window.setTimeout(function(){e.style.height="auto",e.style.height=e.scrollHeight+1+"px"},0)}var r,t=n("figure",{classes:["figure","figure--request"],parent:e}),o=e.querySelector(".figure--navigation"),c=(null!==o&&e.insertBefore(t,o),n("form",{parent:t})),s=n("button",{text:knife_custom_vacancy.button,attributes:{type:"submit"}});for(r in a)!function(){var t=n("textarea",{parent:c,attributes:{name:r,required:"required",rows:1,placeholder:a[r]}});i(t),t.addEventListener("keydown",function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&s.click(),i(t)}),t.addEventListener("paste",function(){i(t)}),window.addEventListener("resize",function(){i(t)})}();c.appendChild(s),c.addEventListener("submit",function(e){e.preventDefault();var t={nonce:knife_custom_vacancy.nonce,time:knife_custom_vacancy.time,heading:knife_custom_vacancy.heading,fields:[]},n=(knife_custom_vacancy.mention&&(t.mention=knife_custom_vacancy.mention),c.querySelectorAll("textarea")),a=(n.forEach(function(e){t.fields.push({label:e.getAttribute("placeholder"),value:e.value}),"name"===e.name&&(t.name=e.value)}),s.setAttribute("disabled","disabled"),s.setAttribute("data-loading",!0),new XMLHttpRequest);a.open("POST",knife_custom_vacancy.ajaxurl),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(s.removeAttribute("data-loading"),200!==a.status)return s.textContent=knife_custom_vacancy.error;s.textContent=knife_custom_vacancy.success,n.forEach(function(e){e.value=""})},a.onerror=function(){s.removeAttribute("data-loading"),s.textContent=knife_custom_vacancy.error},a.send(JSON.stringify(t))})}}}}();