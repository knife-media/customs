"use strict";!function(){if("undefined"!=typeof knife_custom_write){var e=document.querySelector(".entry-content");if(null!==e&&void 0!==knife_custom_write.ajaxurl){var r,o,t,n,i,a=document.createElement("form"),e=(document.querySelector(".entry-content").appendChild(a),m("classes")),e=(0<e.length&&(a.className=e.join(" ")),m("heading")),s=(0<e.length&&((i=document.createElement("h4")).classList.add("form__heading"),i.textContent=e,a.appendChild(i)),a.classList.add("form","form--club"),a.addEventListener("submit",function(e){e.preventDefault();var e={nonce:m("nonce"),time:m("time"),name:a.querySelector('input[name="name"]').value,email:a.querySelector('input[name="email"]').value,subject:a.querySelector('input[name="subject"]').value,text:a.querySelector('textarea[name="text"]').value},n=new XMLHttpRequest;return n.open("POST",knife_custom_write.ajaxurl+"/club"),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(e)),d(!(n.onload=function(){if(d(!0),200!==n.status)return u();var e,t=JSON.parse(n.responseText);return t.success?(e=(e=t.message)||"",o.classList.add("icon--done"),r.innerHTML=e,localStorage.removeItem("knife_form_write"),a.reset()):u(t.message)}))}),a),l=knife_custom_write.fields;for(n in l)l.hasOwnProperty(n)&&c(n,l[n],s);e=s,(i=document.createElement("div")).classList.add("form__control"),(o=document.createElement("span")).classList.add("form__control-loader","icon"),i.appendChild(o),(r=document.createElement("span")).classList.add("form__control-notice"),i.appendChild(r),(t=document.createElement("button")).classList.add("form__control-button","button"),t.innerHTML=m("button","Send"),i.appendChild(t),e.appendChild(i)}}function c(e,t,n){if(void 0!==t.element){var r,o=document.createElement(t.element),i=(o.classList.add("form__field-"+t.element),o.setAttribute("name",e),document.createElement("div"));for(r in i.classList.add("form__field"),i.appendChild(o),delete t.element,t)o.setAttribute(r,t[r]);o.value=(e=e,(JSON.parse(localStorage.getItem("knife_form_write"))||{})[e]||""),o.addEventListener("input",function(e){var t,n,r;t=this.name,n=this.value,(r=JSON.parse(localStorage.getItem("knife_form_write"))||{})[t]=n,localStorage.setItem("knife_form_write",JSON.stringify(r))}),o.addEventListener("focus",function(e){n.classList.remove("form--fold")}),n.appendChild(i)}}function d(e){return o.classList.remove("icon--loop"),void 0===e||!0===e?t.removeAttribute("disabled",""):(o.classList.remove("icon--alert","icon--done"),o.classList.add("icon--loop"),r.innerHTML="",t.setAttribute("disabled",""))}function u(e){e=e||m("warning","Request error");o.classList.add("icon--alert"),r.innerHTML=e}function m(e,t){return knife_custom_write.hasOwnProperty(e)?knife_custom_write[e]:t||""}}();