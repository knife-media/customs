"use strict";!function(){var e,l,t;function u(e,t){for(var a=e.length-1;0<a;a--){var d=Math.floor(Math.random()*(a+1)),i=e[a];e[a]=e[d],e[d]=i}return void 0!==t?e[t]:e}function a(){(l=document.createElement("div")).classList.add("wizard"),document.body.appendChild(l);var e=document.createElement("button"),t=(e.classList.add("wizard__close"),e.setAttribute("type","button"),l.appendChild(e),document.getElementById("wpadminbar")),a=(t&&window.scrollY<t.clientHeight&&(e.style.marginTop=t.clientHeight-window.scrollY+"px"),window.scrollY);function d(){document.body.classList.remove("is-login"),document.body.style.top="",document.body.removeChild(l),window.scrollTo(0,a),document.removeEventListener("keydown",i)}function i(e){"Escape"==e.key&&d()}document.body.classList.add("is-login"),document.body.style.top=-a+"px",e.addEventListener("click",d),document.addEventListener("keydown",i);var n,r,t=document.createElement("div"),e=(t.classList.add("wizard__screen"),l.appendChild(t),null!==(e=window.localStorage.getItem("secret-wizard"))&&(e=JSON.parse(e)).message&&e.timestamp&&!(Math.floor(Date.now()/1e3)>e.timestamp+86400)&&(e=e.message).title&&e.text?e:null);if(null===e)return n=t,l.classList.add("wizard--welcome"),(s=document.createElement("div")).classList.add("wizard__decor"),n.appendChild(s),(r=document.createElement("span")).classList.add("wizard__icon","wizard__icon--sun"),s.appendChild(r),knife_custom_wizard.welcome.excerpts.forEach(function(e){var t=document.createElement("h5");t.classList.add("wizard__excerpt"),t.textContent=e,n.appendChild(t)}),function(e){var t=document.createElement("button"),e=(t.classList.add("wizard__button","wizard__button--welcome"),t.setAttribute("type","button"),e.appendChild(t),document.createElement("span")),e=(e.textContent=knife_custom_wizard.welcome.button,t.appendChild(e),document.createElement("label"));e.textContent=u(knife_custom_wizard.welcome.labels,0),t.appendChild(e);for(var a=0;a<2;a++){var d=document.createElement("i");d.classList.add("wizard__icon","wizard__icon--star"),t.appendChild(d)}return t}(n).addEventListener("click",function(){var c;l.classList.remove("wizard--welcome"),c=n,l.classList.add("wizard--prepare"),setTimeout(function(){l.classList.remove("wizard--prepare");var n=c;for(l.classList.add("wizard--selection");n.firstChild;)n.removeChild(n.lastChild);var e=n,t=document.createElement("h2");t.classList.add("wizard__call"),e.appendChild(t),(e=document.createElement("span")).textContent=knife_custom_wizard.selection.title,t.appendChild(e),(e=document.createElement("label")).textContent=knife_custom_wizard.selection.label,t.append(e);for(var a=document.createElement("div"),d=(a.classList.add("wizard__grid"),n.appendChild(a),function(e){var t=document.createElement("button"),e=(t.classList.add("wizard__button","wizard__button--selection"),t.setAttribute("type","button"),t.setAttribute("disabled","disabled"),e.appendChild(t),document.createElement("span"));e.textContent=knife_custom_wizard.selection.button,t.appendChild(e);for(var a=0;a<2;a++){var d=document.createElement("i");d.classList.add("wizard__icon","wizard__icon--star"),t.appendChild(d)}return t}(n)),i=[],r=1;r<16;r++)i.push(r.toString(16));i=u(i);for(var s=new Set,o=0;o<i.length;o++)!function(){var e=document.createElement("button");e.classList.add("wizard__card"),e.setAttribute("type","button"),e.setAttribute("data-char",i[o]),e.innerHTML='<i class="wizard__icon wizard__icon--'.concat(i[o],'"></i>'),a.appendChild(e),e.addEventListener("click",function(){return e.classList.remove("wizard__card--active"),a.classList.remove("wizard__grid--full"),d.setAttribute("disabled","disabled"),s.has(e.dataset.char)?s.delete(e.dataset.char):4<=s.size?(a.classList.add("wizard__grid--full"),d.removeAttribute("disabled")):(s.add(e.dataset.char),e.classList.add("wizard__card--active"),4<=s.size?(a.classList.add("wizard__grid--full"),d.removeAttribute("disabled")):void 0)})}();d.addEventListener("click",function(){l.classList.remove("wizard--selection");var i=n,e=Array.from(s).join("");function t(e){if(l.classList.remove("wizard--mystery"),null===e){var t=i;for(l.classList.add("wizard--final");t.firstChild;)t.removeChild(t.lastChild);var a=document.createElement("h2");a.classList.add("wizard__caption"),a.textContent=knife_custom_wizard.error.title,t.appendChild(a),(a=document.createElement("figure")).classList.add("wizard__result","wizard__result--error"),a.textContent=knife_custom_wizard.error.text,t.appendChild(a);(a=document.createElement("div")).classList.add("wizard__decor","wizard__decor--final"),t.appendChild(a);var d=document.createElement("span");return d.classList.add("wizard__icon","wizard__icon--star"),void a.appendChild(d)}a={timestamp:Math.floor(Date.now()/1e3),message:e},window.localStorage.setItem("secret-wizard",JSON.stringify(a)),m(i,e)}l.classList.add("wizard--mystery"),setTimeout(function(){!function t(a,d){if(!l.classList.contains("wizard--mystery"))return!1;a.forEach(function(e){e.classList.add("wizard__card--flash")});a[d].classList.remove("wizard__card--flash");setTimeout(function(){for(var e=d;e==d;)e=Math.floor(Math.random()*a.length);return t(a,e)},500)}(i.querySelectorAll(".wizard__card--active"),0)},750);var a=function(e){setTimeout(function(){return t(e)},2500)},d=new XMLHttpRequest;d.open("POST",knife_custom_wizard.url,!0),d.setRequestHeader("Content-Type","application/json"),d.addEventListener("load",function(){try{var e=JSON.parse(d.responseText);if(200===d.status&&e.message)return a(e.message)}catch(e){console.error(e)}a(null)}),d.addEventListener("error",function(){return a(null)}),d.send(JSON.stringify({options:e}))})},1e3)});m(t,e);var s=document.createElement("div");s.classList.add("wizard__repeated"),s.textContent=knife_custom_wizard.repeated,t.appendChild(s)}function m(e,t){for(l.classList.add("wizard--final");e.firstChild;)e.removeChild(e.lastChild);var a=document.createElement("h2"),a=(a.classList.add("wizard__caption"),a.textContent=t.title,e.appendChild(a),document.createElement("figure")),t=(a.classList.add("wizard__result"),a.innerHTML=t.text,e.appendChild(a),document.createElement("div")),a=(t.classList.add("wizard__decor","wizard__decor--final"),e.appendChild(t),document.createElement("span"));a.classList.add("wizard__icon","wizard__icon--star"),t.appendChild(a)}"undefined"!=typeof knife_custom_wizard&&null!==(e=document.querySelector(".header__logo-link"))&&(l=null,t=0,e.addEventListener("click",function(e){e.preventDefault(),++t<3||(t=0,a())}))}();